extends ../layout.pug

block content
  .container
    h1 Products

    // Category Selection Buttons
    .filter-buttons.text-center
      button.filter-btn(type="button", onclick="window.location.href='/products?category=snowboard'") Snowboards
      button.filter-btn(type="button", onclick="window.location.href='/products?category=ski'") Skis
      button.filter-btn(type="button", onclick="window.location.href='/products?category=shoes'") Shoes
      button.filter-btn(type="button", onclick="window.location.href='/products?category=hats'") Hats
      button.filter-btn(type="button", onclick="window.location.href='/products'") All Categories

    // Product List
    .row
      each product in products
        .col-md-4.card-box
          .card
            img.card-img-top(src=product.imageUrl, alt=product.name)
            .card-body
              h5.card-title= product.name
              p.card-text= product.description
              p Price: $#{product.price}
              a.btn.btn-primary(href=`/products/${product.id}`) View Details

    // Pagination Links
    .pagination
      // Previous Button
      if currentPage > 1
        a.page-link(href=`/products?page=${currentPage - 1}${category ? `&category=${category}` : ''}`) Previous

      // Page Numbers
      each pageNum in Array(totalPages).fill(0).map((_, i) => i + 1)
        if pageNum === currentPage
          a.page-link.active= pageNum
        else
          a.page-link(href=`/products?page=${pageNum}${category ? `&category=${category}` : ''}`)= pageNum

      // Next Button
      if currentPage < totalPages
        a.page-link(href=`/products?page=${currentPage + 1}${category ? `&category=${category}` : ''}`) Next
